apiVersion: kuttl.dev/v1
kind: TestSuite
artifactsDir: /tmp/
startKIND: false
skipDelete: true
skipClusterDelete: true
suppress:
  - events
parallel: 1
commands:
  # Deploy Everest Operator into K8S cluster
  - command: make -f ${OPERATOR_ROOT_PATH}/Makefile deploy-test
  # Wait for Everest Operator to be ready.
  # Need to restart Everest Operator to pick the latest image (in case it was rebuilt).
  - command: kubectl delete pod -n everest-system -l control-plane=controller-manager
  - command: kubectl wait --for condition=available --timeout=30s deploy/everest-controller-manager -n everest-system
testDirs:
  - test/e2e/engine-features
